{% if products.total != 0 %}
  {% for product in products %}
  <div class="category__item">
    <div class="product-item" data-product-index="{{ product.id }}">
      <div class="product-item__top">
        <div class="product-item__tags">
          {% if product.is_new %}
          <div class="product-item__tag product-item__tag--new">New</div>
          {% endif %}
          {% if product.is_hit %}
          <div class="product-item__tag product-item__tag--hit">Хит</div>
          {% endif %}
          {% if product.sale_price > 0 %}
          <div class="product-item__tag product-item__tag--sale">
            -{{ (100 - (product.sale_price / product.price * 100))|number_format(0, '', '') }}%
          </div>
          {% endif %}
        </div>
        <div class="product-item__image">
          <a href="{{ 'product'|page({ id: product.id }) }}" class="product-item__link">
            <picture>
              <source srcset="{{ product.image|media|resize(281, 281, { mode: 'crop', quality: '80' }) }}">
              <img src="{{ product.image|media|resize(281, 281, { mode: 'crop', quality: '80' }) }}" alt="{{ product.title }}" class="product-item__image-thumb" />
            </picture>
          </a>
        </div>
      </div>
      <div class="product-item__bottom">
        <div class="product-item__info">
          <a href="{{ 'product'|page({ id: product.id }) }}" class="product-item__title">{{ product.title }}</a>
          {% if product.categories[0] %}
          <a href="{{ 'category' | page({ slug: product.categories[0].slug }) }}" class="product-item__category">{{ product.categories[0].title}}</a>
          {% endif %}
        </div>
        <div class="product-item__amount">
          <div class="product-amount" data-js-action="update-qty">
            <button type="button" class="product-amount__btn js-remove-cart">
              <svg class="product-amount__btn-ico icon-minus">
                <use xlink:href="{{ 'assets/spritemap.svg#sprite-minus'|theme }}"></use>
              </svg>
            </button>
            <input
              type="number"
              readonly="readonly"
              class="product-amount__val"
              value="1"
              data-js-action="qty-val"
            />
            <button type="button" class="product-amount__btn js-add-cart">
              <svg class="product-amount__btn-ico icon-plus">
                <use xlink:href="{{ 'assets/spritemap.svg#sprite-plus'|theme }}"></use>
              </svg>
            </button>
          </div>
        </div>
        <div class="product-item__cart">
          <div class="product-item__price">

            {% if product.sale_price > 0 %}
            <div class="product-item__current-price">
              <strong class="product-item__price-val">{{ product.sale_price|number_format(0, '', ' ') }}</strong>
              <span class="product-item__price-label">₽</span>
            </div>
            <div class="product-item__old-price">
              <strong class="product-item__price-val">{{ product.price|number_format(0, '', ' ') }}</strong>
              <span class="product-item__price-label">₽</span>
            </div>

            {% else %}
            <div class="product-item__current-price">
              <strong class="product-item__price-val">{{ product.price|number_format(0, '', ' ') }}</strong>
              <span class="product-item__price-label">₽</span>
            </div>
            {% endif %}

          </div>
          <button
            type="button"
            class="product-item__order-btn"
            data-product-id="{{ product.id }}"
            data-js-action="add-to-cart"
            data-product-amount="1"
          >
            <svg class="product-item__order-ico icon-shopping-cart">
              <use xlink:href="{{ 'assets/spritemap.svg#sprite-shopping-cart'|theme }}"></use>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </div>
  {% endfor %}
{% else %}
    <p class="category__empty">Товаров пока нет!</p>
{% endif %}
