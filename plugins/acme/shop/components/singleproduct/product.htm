<div data-sticky-container class="product__row" itemscope itemtype="https://schema.org/Product" data-product-index="{{ product.id }}">
  <!-- meta start -->
  <meta itemprop="name" content="{{ product.meta_title ? product.meta_title : product.title }}" />
  <link itemprop="url" href="{{ this.page.url }}" />
  <link itemprop="image" href="{{ product.image|media }}" />
  {% if product.brand %}
  <meta itemprop="brand" content="{{ product.brand.title }}" />
  <meta itemprop="manufacturer" content="{{ product.brand.title }}" />
  {% endif %}
  <meta itemprop="model" content="{{ product.title }}" />
  <meta itemprop="gtin12" content="upc" />
  <meta itemprop="gtin8" content="ean" />
  <meta itemprop="productID" content="{{ product.code }}" />
  <meta itemprop="category" content="{{ product.categories[0].title }}" />
  <meta itemprop="description" content="{{ product.meta_description }}" />
  <!-- meta end -->
  <div class="product__body">
    <h1 class="product__title">{{ product.title }}</h1>
    <div class="product__top">
      {% if product.code %}
      <div class="product__code">Артикул: <span class="product__code-value">{{ product.code }}</span></div>
      {% endif %}
      <div class="product__tags">
        {% if product.is_new %}
        <div class="product__tag product__tag--new">New</div>
        {% endif %}
        {% if product.sale_price > 0 %}
        <div class="product__tag product__tag--sale">Sale</div>
        {% endif %}
      </div>
      <div class="product__slider-wrap">
        <div class="swiper product__slider" data-js-slider="single-product">
          <div class="swiper-wrapper">

            <div class="swiper-slide product__slide">
              <div class="product__slide-content">
                <picture>
                  <source srcset="{{ product.image|media }}">
                  <img src="{{ product.image|media }}" alt="{{ product.title }}" class="product__slide-thumb" />
                </picture>
              </div>
            </div>
            {% for image in product.gallery %}
            <div class="swiper-slide product__slide">
              <div class="product__slide-content">
                <picture>
                  <source srcset="{{ product.image|media }}">
                  <img src="{{ image.path }}" alt="{{ image.title }}" class="product__slide-thumb" />
                </picture>
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
        <button class="product__slider-btn button product__slider-btn--prev" data-js-action="single-product-prev">
          <svg class="product__slider-arrow">
            <use xlink:href="{{ 'assets/spritemap.svg#sprite-arrow-prev'|theme }}"></use>
          </svg>
        </button>
        <button class="product__slider-btn button product__slider-btn--next" data-js-action="single-product-next">
          <svg class="product__slider-arrow">
            <use xlink:href="{{ 'assets/spritemap.svg#sprite-arrow-next'|theme }}"></use>
          </svg>
        </button>
      </div>
    </div>
    <div class="product__content">

      <div class="product__entry product__entry--desktop">
        <div class="product__title">Описание</div>
        <div class="product__entry-descr">
          {{ product.description|raw }}
        </div>
      </div>

      {% if product.props %}
      <div class="product__props product__props--full">
        <div class="product__props-title">Характеристики: </div>
        {% for prop in product.props %}
        <div class="product__props-row">
          <div class="product__props-label">
            <span class="product__props-text">{{ prop.props_option }}</span>
          </div>
          <div class="product__props-val">{{ prop.props_value }}</div>
        </div>
        {% endfor %}
      </div>
      {% endif %}


      {% if product.categories %}
      <div class="product__categories-list">
        {% for category in product.categories %}
        <a
          href="{{ 'category'|page({ slug: category.slug }) }}"
          class="product__categories-link"
        >
        {{ category.title }}
        </a>
        {% endfor %}
      </div>
      {% endif %}

    </div>
    <div class="product__bottom">
      <div class="product__order">
        <div class="product__order-row">
          <div class="product-price" itemprop="offers" itemscope itemtype="https://schema.org/Offer">
            {% if product.sale_price > 0 %}
            <div class="product-price__current">
              <strong class="product-price__val" data-price>{{ product.sale_price|number_format(2, '.', ' ') }}</strong>
              <span class="product-price__label">₽</span>
            </div>
            <div class="product-price__old">
              <strong class="product-price__val" data-price>{{ product.price|number_format(2, '.', ' ') }}</strong>
              <span class="product-price__label">₽</span>
            </div>
            {% else %}
            <div class="product-price__current">
              <strong class="product-price__val" data-price>{{ product.price|number_format(2, '.', ' ') }}</strong>
              <span class="product-price__label">₽</span>
            </div>
            {% endif %}
            <meta itemprop="priceCurrency" content="RUB" />
            <meta itemprop="price" content="{{ product.sale_price ? product.sale_price : product.price }}" />
            <link itemprop="availability" href="https://schema.org/InStock" />
          </div>
          <div class="product-amount" data-js-action="update-qty">
            <button type="button" class="product-amount__btn js-remove-cart">
              <svg class="product-amount__btn-ico icon-minus">
                <use xlink:href="{{ 'assets/spritemap.svg#sprite-minus'|theme }}"></use>
              </svg>
            </button>
            <input
              type="number"
              readonly="readonly"
              class="product-amount__val"
              value="1"
              data-js-action="qty-val"
            />
            <button type="button" class="product-amount__btn js-add-cart">
              <svg class="product-amount__btn-ico icon-plus">
                <use xlink:href="{{ 'assets/spritemap.svg#sprite-plus'|theme }}"></use>
              </svg>
            </button>
          </div>
        </div>
        <button
          type="button"
          class="product__add"
          data-product-id="{{ product.id }}"
          data-js-action="add-to-cart"
          data-product-amount="1"
        >
          В корзину
          <svg class="product__add-ico icon-cart">
            <use xlink:href="{{ 'assets/spritemap.svg#sprite-cart'|theme }}"></use>
          </svg>
        </button>
      </div>
      <div class="product__props product__props--mobile">
        {% for prop in product.props %}
        <div class="product__props-row">
          <div class="product__props-label">{{ prop.props_option }}</div>
          <div class="product__props-val">{{ prop.props_value }}</div>
        </div>
        {% endfor %}
      </div>
      <div class="product__entry product__entry--mobile">
        <div class="product__entry-title">Описание</div>
        <div class="product__entry-descr">
          {{ product.description|raw }}
        </div>
      </div>
    </div>
  </div>
  <div
    data-sticky-for="991"
    data-margin-top="20"
    data-sticky-class="product__form--sticky"
    data-js="sticky"
    class="product__form"
  >
    <div class="product__form-title">Сделать заказ</div>
    <div class="product__form-tag">
      В наличие
      <svg class="product__form-tag-ico icon-check">
        <use xlink:href="{{ 'assets/spritemap.svg#sprite-checkbox'|theme }}"></use>
      </svg>
    </div>
    <div class="product-price">
      {% if product.sale_price > 0 %}
      <div class="product-price__current">
        <strong class="product-price__val" data-price>{{ product.sale_price|number_format(2, '.', ' ') }}</strong>
        <span class="product-price__label">₽</span>
      </div>
      <div class="product-price__old">
        <strong class="product-price__val" data-price>{{ product.price|number_format(2, '.', ' ') }}</strong>
        <span class="product-price__label">₽</span>
      </div>
      {% else %}
      <div class="product-price__current">
        <strong class="product-price__val" data-price>{{ product.price|number_format(2, '.', ' ') }}</strong>
        <span class="product-price__label">₽</span>
      </div>
      {% endif %}
    </div>
    <div class="product-amount" data-js-action="update-qty">
      <button type="button" class="product-amount__btn js-remove-cart">
        <svg class="product-amount__btn-ico icon-minus">
          <use xlink:href="{{ 'assets/spritemap.svg#sprite-minus'|theme }}"></use>
        </svg>
      </button>
      <input
        type="number"
        readonly="readonly"
        class="product-amount__val"
        value="1"
        data-js-action="qty-val"
      />
      <button type="button" class="product-amount__btn js-add-cart">
        <svg class="product-amount__btn-ico icon-plus">
          <use xlink:href="{{ 'assets/spritemap.svg#sprite-plus'|theme }}"></use>
        </svg>
      </button>
    </div>
    <button
      type="button"
      class="product__add"
      data-product-id="{{ product.id }}"
      data-js-action="add-to-cart"
      data-product-amount="1"
    >
      В корзину
      <svg class="product__add-ico icon-cart">
        <use xlink:href="{{ 'assets/spritemap.svg#sprite-cart'|theme }}"></use>
      </svg>
    </button>
  </div>
</div>
